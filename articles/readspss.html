<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>readspss introduction • readspss</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="readspss introduction">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">readspss</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.18.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/readspss.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JanMarvin/readspss/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>readspss introduction</h1>
                        <h4 data-toc-skip class="author">Jan Marvin
Garbuszus</h4>
            
            <h4 data-toc-skip class="date">2021-10-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/JanMarvin/readspss/blob/main/vignettes/readspss.rmd" class="external-link"><code>vignettes/readspss.rmd</code></a></small>
      <div class="hidden name"><code>readspss.rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="readspss-importing-spss-files-to-r">
<code>readspss</code> – importing SPSS files to R<a class="anchor" aria-label="anchor" href="#readspss-importing-spss-files-to-r"></a>
</h2>
<p>Welcome to the <code>readspss</code> package. The package was written
from scratch with additional code for special cases. Starting as a side
project for me to learn Rcpp the package did grow over the years. Today
<code>readspss</code> is well tested using every sav, por and zsav file
I could lay my hands on. Import is considered feature complete, write
support is available, just not yet for every feature.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Installation is provided using <code>r-universe</code> or
<code>remotes</code>.</p>
<p>With <a href="https://r-universe.dev/" class="external-link">r-universe</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  janmarvin <span class="op">=</span> <span class="st">'https://janmarvin.r-universe.dev'</span>,</span>
<span>  CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'readspss'</span><span class="op">)</span></span></code></pre></div>
<p>With <code>devtools</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"JanMarvin/readspss"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="import">Import<a class="anchor" aria-label="anchor" href="#import"></a>
</h3>
<p>For the import of (z)sav and por files <code><a href="../reference/read.sav.html">read.sav()</a></code> and
<code><a href="../reference/read.por.html">read.por()</a></code> are available.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JanMarvin/readspss" class="external-link">readspss</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example using sav</span></span>
<span><span class="va">fl_sav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"electric.sav"</span>, package <span class="op">=</span> <span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.sav.html">read.sav</a></span><span class="op">(</span><span class="va">fl_sav</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example using zsav</span></span>
<span><span class="va">fl_zsav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"cars.zsav"</span>, package <span class="op">=</span> <span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">dz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.sav.html">read.sav</a></span><span class="op">(</span><span class="va">fl_zsav</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example using por</span></span>
<span><span class="va">fl_por</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"electric.por"</span>, package <span class="op">=</span> <span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">dp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.por.html">read.por</a></span><span class="op">(</span><span class="va">fl_por</span><span class="op">)</span></span></code></pre></div>
<p>Both functions return data.frame objects, containing numerics, dates,
factors or characters.</p>
<div class="section level4">
<h4 id="import-options">Import options<a class="anchor" aria-label="anchor" href="#import-options"></a>
</h4>
<p>For user specific demand the package supports many option available
in <code>foreign</code> such as <code>convert.factors</code> and
<code>use.missings</code>. If one is familiar with said package, one
should have no problem adapting to <code>readspss</code>. If for example
one does not want to have factors since they work differently in R than
in SPSS this can be achieved using the following code.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># example using sav</span></span>
<span><span class="va">fl_sav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"electric.sav"</span>, package <span class="op">=</span> <span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.sav.html">read.sav</a></span><span class="op">(</span><span class="va">fl_sav</span>, convert.factors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example using zsav</span></span>
<span><span class="va">fl_zsav</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"cars.zsav"</span>, package <span class="op">=</span> <span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">dz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.sav.html">read.sav</a></span><span class="op">(</span><span class="va">fl_zsav</span>, convert.factors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example using por</span></span>
<span><span class="va">fl_por</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"electric.por"</span>, package <span class="op">=</span> <span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">dp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.por.html">read.por</a></span><span class="op">(</span><span class="va">fl_por</span>, convert.factors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Since many features are self explanatory not all will be explained.
Of course <code>readspss</code> can handle sav files in different
encodings; it handles file sets without data; all types of missings SPSS
developers over the years came up with; short, long and longer strings;
little and big endian files; sav, por and zsav compressed files; files
without valid header information; old and new SPSS files. As stated
above, every SPSS file I came across and during the development I came
across many.</p>
<p>Using code by Ben Pfaff <code>readspss</code> can handle encrypted
SPSS files.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"hotel.sav"</span>, package<span class="op">=</span><span class="st">"readspss"</span><span class="op">)</span></span>
<span><span class="va">fle</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"hotel-encrypted.sav"</span>, package<span class="op">=</span><span class="st">"readspss"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.sav.html">read.sav</a></span><span class="op">(</span><span class="va">flu</span><span class="op">)</span></span>
<span><span class="va">df_e</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.sav.html">read.sav</a></span><span class="op">(</span><span class="va">fle</span>, pass <span class="op">=</span> <span class="st">"pspp"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="import-details">Import details<a class="anchor" aria-label="anchor" href="#import-details"></a>
</h4>
<p>If available in the SPSS file, the resulting data.frame will contain
attributes such as the datalabel, timestamp, filelabel, additional
documentation and information regarding missings, labels, file encoding.
A complete list of attributes can be found using <code><a href="../reference/read.sav.html">?read.sav</a></code>
and <code><a href="../reference/read.por.html">?read.por</a></code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="export">Export<a class="anchor" aria-label="anchor" href="#export"></a>
</h3>
<p>R data.frame objects can be exported using <code><a href="../reference/write.sav.html">write.sav()</a></code>
and <code><a href="../reference/write.por.html">write.por()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JanMarvin/readspss" class="external-link">readspss</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write.sav.html">write.sav</a></span><span class="op">(</span><span class="va">cars</span>, filepath <span class="op">=</span> <span class="st">"cars.sav"</span><span class="op">)</span> <span class="co"># optional compress = TRUE</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write.sav.html">write.sav</a></span><span class="op">(</span><span class="va">cars</span>, filepath <span class="op">=</span> <span class="st">"cars.zsav"</span><span class="op">)</span> <span class="co"># optional compress = TRUE</span></span>
<span><span class="co">#&gt; Zsav compression is still experimental. Testing is welcome!</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write.por.html">write.por</a></span><span class="op">(</span><span class="va">cars</span>, filepath <span class="op">=</span> <span class="st">"cars.por"</span><span class="op">)</span></span></code></pre></div>
<p>Export provides a few options to add a label, for compression of sav
and zsav files and conversion of dates. Currently it is not possible to
export strings longer than 255 chars. Obviously all exported files can
be imported using SPSS and <code>readspss</code> (PSPP is expected to
work).</p>
</div>
<div class="section level3">
<h3 id="package-development">Package development<a class="anchor" aria-label="anchor" href="#package-development"></a>
</h3>
<p>One may wonder, why does the world need another package to import
SPSS data to the R world. Similar tasks can be done by
<code>foreign</code>, <code>memisc</code> and <code>haven</code>
package. Well the first two packages use code from older releases of
PSPP and R-Core most likely has neither time nor a need to update their
codebase to a newer PSPP release. Still over the years the SPSS file
format has changed. Not drastically but new features such as long
strings were implemented. Features that <code>foreign</code> cannot
handle. The newest of the three aforementioned packages,
<code>haven</code>, is a wrapper around the <code>ReadStat</code> C
library. The package development began around the time we started with
<a href="https://github.com/sjewo/readstata13" class="external-link"><code>readstata13</code></a>
so it is around quite some time now. Contrary to many other people in
the R world, I am not a huge fan of <code>tibbles</code> which are an
integral part of <code>haven</code>. One can agree that this is a minor
problem. My bigger problem with the package is, that I am not yet
convinced that <code>ReadStat</code> and <code>haven</code> are tested
enough. Even though I am sure that authors of both made sure that in
most cases their software works, there are still cases where it does
not. During the development process of <code>readspss</code> I reported
a few bugs to the haven package. Among them were incorrectly trimmed
long strings and a severe bug where por-files imported awfully incorrect
values. All errors were found using publicly available data files,
writing unit tests and comparing data across different R-packages, PSPP
and various versions of SPSS. Until I see that such behavior is adopted
by other packages, I simply do not trust them and maybe you should not
either. If the import process of data fails, one does not have to worry
about anything else.</p>
<p>The development of <code>readspss</code> began once development of
<code>readstata13</code> slowed down. Having written most of the
<code>c++</code> code to import dta-files, I learned a lot about binary
files and Rcpp development. Since SPSS was another statistical software
used at the university where I worked at that time, it felt natural to
have a look at sav-files. Shortly after I learned that the dta-file
documentation is priceless, not available for SPSS and development
ceased for quite some time. In February 2018 I changed jobs, resulting
in many train rides. A project was needed and development began again.
Using the PSPP documentation and countless hours of trial and error lead
to the current state of the package.</p>
</div>
<div class="section level3">
<h3 id="thanks">Thanks<a class="anchor" aria-label="anchor" href="#thanks"></a>
</h3>
<p><code>readspss</code> uses code of Ben Pfaff for the encryption part.
It uses code from <a href="http://www.stat.ruhr-uni-bochum.de/tda.html" class="external-link">TDA</a> by Goetz
Rohwer and Ulrich Poetter for the conversion of numerics in the
por-parser. The <a href="http://www.gnu.org/software/pspp/pspp-dev/html_node/index.html" class="external-link">PSPP
documentation</a> was a huge help. Without the testing by Ulrich Poetter
this package would not be as complete as it is.</p>
</div>
<div class="section level3">
<h3 id="last-words">Last words<a class="anchor" aria-label="anchor" href="#last-words"></a>
</h3>
<p>Even though <code>readspss</code> is tested a lot, it would be great,
if users would test their imports and exports and report their
experience. Open an issue on the github page or write me an email and
let me know what you think. Bug free code does not exist.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jan Marvin Garbuszus, Ben Pfaff.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
